<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Scroll Down Stop</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
      }

      .test-container {
        padding: 20px;
      }

      .test-case {
        margin: 20px 0;
        padding: 15px;
        border: 2px solid #ccc;
        border-radius: 5px;
      }

      .test-case h3 {
        margin-top: 0;
        color: #333;
      }

      .test-case button {
        background: #007cba;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 3px;
        cursor: pointer;
        margin: 5px;
      }

      .test-case button:hover {
        background: #005a87;
      }

      .debug-info {
        background: #f0f0f0;
        padding: 10px;
        margin: 10px 0;
        border-radius: 3px;
        font-family: monospace;
        font-size: 12px;
      }

      /* Simulate the CSS structure */
      .checklist-page main::before {
        content: "";
        display: block;
        height: 90px; /* Scroll-up stop */
      }

      .checklist-page main::after {
        content: "";
        display: block;
        height: var(--bottom-buffer, 20000px); /* Scroll-down stop */
      }

      .checklist-page main {
        background: #e8f4f8;
        min-height: 500px;
        padding: 20px;
      }

      .content-section {
        background: #fff;
        padding: 20px;
        margin: 10px 0;
        border: 1px solid #ddd;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1>Scroll Down Stop Test - Positive Current-Visible Values</h1>

      <div class="test-case">
        <h3>Test Case 1: Current-Visible = +10px</h3>
        <p>Expected: Content top cannot go above 10px from viewport top</p>
        <button onclick="testScrollStop(10)">Test +10px</button>
        <div class="debug-info" id="debug-10"></div>
      </div>

      <div class="test-case">
        <h3>Test Case 2: Current-Visible = +50px</h3>
        <p>Expected: Content top cannot go above 50px from viewport top</p>
        <button onclick="testScrollStop(50)">Test +50px</button>
        <div class="debug-info" id="debug-50"></div>
      </div>

      <div class="test-case">
        <h3>Test Case 3: Current-Visible = +90px</h3>
        <p>Expected: Content top cannot go above 90px from viewport top</p>
        <button onclick="testScrollStop(90)">Test +90px</button>
        <div class="debug-info" id="debug-90"></div>
      </div>

      <div class="test-case">
        <h3>Test Case 4: Current-Visible = +150px</h3>
        <p>Expected: Content top cannot go above 150px from viewport top</p>
        <button onclick="testScrollStop(150)">Test +150px</button>
        <div class="debug-info" id="debug-150"></div>
      </div>

      <div class="test-case">
        <h3>Test Case 5: Current-Visible = +200px</h3>
        <p>Expected: Content top cannot go above 200px from viewport top</p>
        <button onclick="testScrollStop(200)">Test +200px</button>
        <div class="debug-info" id="debug-200"></div>
      </div>

      <div class="test-case">
        <h3>Reset Test</h3>
        <button onclick="resetTest()">Reset to Fallback</button>
        <div class="debug-info" id="debug-reset"></div>
      </div>
    </div>

    <div class="checklist-page">
      <main>
        <div class="content-section">
          <h2>Test Content Section 1</h2>
          <p>This is test content to verify scroll behavior.</p>
        </div>
        <div class="content-section">
          <h2>Test Content Section 2</h2>
          <p>More test content to verify scroll behavior.</p>
        </div>
        <div class="content-section">
          <h2>Test Content Section 3</h2>
          <p>Additional test content to verify scroll behavior.</p>
        </div>
      </main>
    </div>

    <script>
      function testScrollStop(currentVisible) {
        // Set the CSS variable for scroll-down stop
        document.documentElement.style.setProperty(
          "--bottom-buffer",
          currentVisible + "px"
        );

        // Update debug info
        const debugId = "debug-" + currentVisible;
        const debugDiv = document.getElementById(debugId);
        debugDiv.innerHTML = `
                <strong>Test Applied:</strong><br>
                Current-visible: +${currentVisible}px<br>
                CSS --bottom-buffer: ${currentVisible}px<br>
                Expected: Content top cannot scroll above ${currentVisible}px from viewport top<br>
                <strong>Test: Try scrolling down to see if content stops at ${currentVisible}px from top</strong>
            `;

        console.log(`ðŸŽ¯ [Test] Applied scroll-down stop: ${currentVisible}px`);
        console.log(
          `ðŸŽ¯ [Test] CSS variable set: --bottom-buffer = ${currentVisible}px`
        );
      }

      function resetTest() {
        // Reset to fallback value
        document.documentElement.style.setProperty(
          "--bottom-buffer",
          "20000px"
        );

        const debugDiv = document.getElementById("debug-reset");
        debugDiv.innerHTML = `
                <strong>Reset Applied:</strong><br>
                CSS --bottom-buffer: 20000px (fallback)<br>
                Scroll-down stop: Disabled<br>
                <strong>Test: Content should scroll normally without restrictions</strong>
            `;

        console.log("ðŸŽ¯ [Test] Reset scroll-down stop to fallback");
      }

      // Initial setup
      document.body.classList.add("checklist-page");
      console.log("ðŸŽ¯ [Test] Page loaded with scroll-down stop test cases");
    </script>
  </body>
</html>
