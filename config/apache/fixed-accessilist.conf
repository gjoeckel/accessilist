# AccessiList Local Development - Production Mirror
# Fixed version: Uses mod_php instead of PHP-FPM
#
# Installation:
# sudo cp /Users/a00288946/Projects/accessilist/config/apache/fixed-accessilist.conf /etc/apache2/other/accessilist.conf
# sudo apachectl restart

<VirtualHost *:80>
    ServerName localhost
    DocumentRoot "/Library/WebServer/Documents"

    # Use Apache built-in PHP handler (mod_php)
    # Works with PHP CLI - no PHP-FPM required
    <FilesMatch \.php$>
        SetHandler application/x-httpd-php
    </FilesMatch>

    # Allow access to main directory
    <Directory "/Library/WebServer/Documents">
        Options +FollowSymLinks +Multiviews +Indexes
        AllowOverride All
        Require all granted
    </Directory>

    # Specific directory for accessilist (local root access)
    <Directory "/Library/WebServer/Documents/accessilist">
        Options +FollowSymLinks +Multiviews +Indexes
        AllowOverride All
        Require all granted
    </Directory>

    # Production path directory
    <Directory "/Library/WebServer/Documents/training">
        Options +FollowSymLinks +Multiviews +Indexes
        AllowOverride All
        Require all granted
    </Directory>

    DirectoryIndex index.php index.htm index.html
    RewriteEngine On

    ErrorLog "/private/var/log/apache2/accessilist_error.log"
    CustomLog "/private/var/log/apache2/accessilist_access.log" combined
</VirtualHost>
